---
title: Configuration
description: Configure rei for your workflow
icon: Settings
---

Rei uses two configuration sources:

1. **YAML config file** — User preferences (workspace path, editor, display settings)
2. **Environment variables** — Infrastructure settings (database, LLM backend)

## Config File

### Loading Order

Rei checks for a config file in priority order (first found wins):

| Priority | Location | Description |
|----------|----------|-------------|
| 1 | `$REI_CONFIG` | Custom path via environment variable |
| 2 | `./rei.yaml` | Local config in current directory |
| 3 | `~/.config/rei/config.yaml` | XDG standard location |
| 4 | `~/.rei/config.yaml` | Legacy fallback |

If no config file is found, defaults are used.

### Default Values

| Setting | Default | Description |
|---------|---------|-------------|
| `workspace.path` | `~/rei-workspace` | Where markdown files are stored |
| `display.color` | `auto` | Color output: `auto`, `always`, `never` |
| `display.date_format` | `%Y-%m-%d` | Date format (strftime) |
| `display.time_format` | `%H:%M` | Time format (strftime) |
| `editor` | None | Falls back to `$EDITOR` env var |
| `git.enabled` | `true` | Master switch for git integration |
| `git.commit_notes` | `true` | Auto-commit note changes |
| `git.commit_reflections` | `false` | Auto-commit reflection changes |
| `git.commit_docs` | `false` | Auto-commit attached documents |
| `git.commit_guidance` | `false` | Auto-commit guidance prompt changes |
| `git.include_tags_in_message` | `true` | Include note tags in commit body |
| `git.include_actor_in_message` | `true` | Include actor in commit body |
| `git.cache_expiry_hours` | `24` | Hours to cache git repo detection |

### Example Config File

Save as `~/.config/rei/config.yaml` (global) or `./rei.yaml` (local):

```yaml title="~/.config/rei/config.yaml"
workspace:
  path: ~/rei-workspace

editor: nvim

display:
  color: auto
  date_format: "%Y-%m-%d"
  time_format: "%H:%M"

git:
  enabled: true
  commit_notes: true
  commit_reflections: true
  commit_docs: true
  commit_guidance: true
```

<Callout type="info">
The `~` prefix is expanded to your home directory.
</Callout>

The local config (`./rei.yaml`) is useful for project-specific settings that override your global configuration.

## Aliases

Define short command aliases in your config file, similar to git aliases. Each alias maps a short name to a full command with arguments.

```yaml title="rei.yaml"
aliases:
  tw: today -c work --no-intentions
  i: intention
  sh: intention show --full
  ls: intention list --active
  h: habit
```

With the above config, `rei tw` expands to `rei today -c work --no-intentions`. Additional arguments are appended, so `rei tw --verbose` becomes `rei today -c work --no-intentions --verbose`.

**Rules:**
- Built-in commands take precedence — an alias cannot shadow a built-in command name (e.g., `today`, `intention`)
- No recursive expansion — aliases are expanded once, not recursively
- First argument only — only the first CLI argument is checked for alias matches

**Listing aliases:**

```bash
rei alias list    # Show all configured aliases
rei alias         # Same as above (list is the default)
```

## Dashboard Panels

Configure custom intention query panels that appear in the `rei today` command output. Each panel runs an independent query against the read model.

```yaml title="rei.yaml"
dashboard:
  panels:
    - label: "Kanban Board"
      where: "workflow:exists"
      group_by: "workflow"

    - label: "In Development"
      where: "version-phase=development"
      context: "work"

    - label: "Queue"
      state_tag: "queue"
      category: "projects"
```

| Field | Required | Description |
|-------|----------|-------------|
| `label` | Yes | Display name shown as the panel header |
| `where` | No | Property filter expression (same syntax as `intention list --where`) |
| `state_tag` | No | Filter by state machine system tag: `queue`, `active`, `done`, `terminal` |
| `group_by` | No | Property key to group results by (sorted by state machine order when applicable) |
| `context` | No | Limit to intentions within this context (cannot combine with `category`) |
| `category` | No | Limit to intentions within this category slug (cannot combine with `context`) |

For full details and examples, see the [Dashboard Panels Guide](/docs/guides/dashboard).

## Environment Variables

### Required: Database

Rei requires MessageDB for event storage.

| Variable | Description | Required |
|----------|-------------|----------|
| `PG_CONNECTION_STRING` | Database connection string | Yes |

```bash
export PG_CONNECTION_STRING="host=localhost port=5432 dbname=rei user=postgres"
```

### Optional: AI Agent

| Variable | Description | Default |
|----------|-------------|---------|
| `REI_LLM_BACKEND` | LLM backend (`claude-cli` or `anthropic-api`) | `claude-cli` |
| `REI_ANTHROPIC_API_KEY` | Anthropic API key (required for `anthropic-api`) | - |
| `REI_LLM_MODEL` | Model override | - |

### LLM Backend Options

**claude-cli** (default)

Uses the Claude CLI (`claude`) installed on your system. No API key required.

```bash
export REI_LLM_BACKEND=claude-cli
```

**anthropic-api**

Uses the Anthropic API directly. Requires an API key.

```bash
export REI_LLM_BACKEND=anthropic-api
export REI_ANTHROPIC_API_KEY=sk-ant-...
```

### Optional: Connection Pool

| Variable | Description | Default |
|----------|-------------|---------|
| `PG_POOL_SIZE` | Connection pool size | 10 |
| `PG_POOL_TIMEOUT` | Pool acquisition timeout (seconds) | 10 |
| `PG_POOL_MAX_CONNECTION_IDLE_TIME` | Max idle time (seconds) | 600 |
| `PG_POOL_MAX_CONNECTION_LIFETIME` | Max connection lifetime (seconds) | 1800 |

## Complete Example

```bash title=".envrc"
# Database (required)
export PG_CONNECTION_STRING="host=localhost port=5432 dbname=rei user=postgres"

# AI (optional - uses claude-cli by default)
export REI_LLM_BACKEND=anthropic-api
export REI_ANTHROPIC_API_KEY=sk-ant-your-key-here

# Pool tuning (optional)
export PG_POOL_SIZE=20

# Editor fallback (if not set in config.yaml)
export EDITOR=vim
```
