---
title: Custom Properties
description: Extend rei entities with custom metadata fields for your workflow
icon: SlidersHorizontal
---

Custom properties allow you to extend rei entities with your own metadata fields. Define properties once, then assign values to individual entities to track information relevant to your workflow.

## Property Definition

A property definition specifies:

| Field | Description |
|-------|-------------|
| **key** | Unique, immutable identifier (e.g., `priority`, `effort-level`) |
| **label** | Human-readable display name |
| **value type** | The data type and constraints |
| **scope** | Which entity types can use this property |

Property keys cannot be changed after creation. Use the label for display.

## Value Types

| Type | Description |
|------|-------------|
| `int` | Integer with min/max bounds |
| `float` | Decimal with precision |
| `text` | Free text with length limits |
| `bool` | Boolean true/false |
| `enum` | Predefined set of values (single-select) |
| `label-set` | Multi-select labels from a predefined set |
| `duration` | Time duration |
| `quantity` | Numeric with units |
| `state-machine` | States with allowed transitions |
| `date` | Date (YYYY-MM-DD) |
| `datetime` | Date and time |
| `path` | File path |
| `url` | URL |

## Creating Properties

### Enum Property

```bash
rei custom-property create priority \
  --type-enum --values low,medium,high \
  -e intention
```

### Integer Property with Constraints

```bash
rei custom-property create effort \
  --type-int --min 1 --max 10 \
  -e intention -e habit
```

### Label-Set Property (Multi-Select)

```bash
rei custom-property create areas \
  --type-label-set --labels backend,frontend,security,devops \
  -e intention \
  --label "Work Areas"
```

### State Machine from YAML

```bash
rei custom-property create workflow \
  --type-state-machine --from-file kanban.yaml \
  -e intention
```

### Scoped to a Category

```bash
rei custom-property create client \
  --type-text --max-length 100 \
  -e intention \
  -c work
```

## Category-Scoped Keys

The same property key can exist in different categories with different configurations. This allows category-specific workflows while using consistent property names.

### Creating Category-Scoped Properties

```bash
# Create workflow for work category
rei custom-property create workflow \
  --type-state-machine --from-file work-kanban.yaml \
  -e intention -c work

# Create workflow for personal category
rei custom-property create workflow \
  --type-state-machine --from-file personal-kanban.yaml \
  -e intention -c personal
```

### Automatic Resolution

When assigning properties to entities, the system automatically resolves based on the entity's category:

- Work-categorized intention uses "workflow" from Work category
- Personal-categorized intention uses "workflow" from Personal category

### Disambiguation

When viewing properties with duplicate keys, use `--category` to disambiguate:

```bash
rei custom-property show workflow --category work
rei custom-property metrics workflow --category personal
```

Without `--category`, an error shows available options:

```
$ rei custom-property show workflow
Error: Multiple properties found with key 'workflow':
  - workflow (scoped to: work)
  - workflow (scoped to: personal)

Use --category to specify: rei custom-property show workflow --category work
```

## Managing Properties

```bash
# List all properties
rei custom-property list

# Filter by entity type
rei custom-property list -e intention

# Show property details
rei custom-property show priority

# Show property with entity counts per state (state machine only)
rei custom-property show workflow --with-counts

# Disambiguate when multiple properties have the same key
rei custom-property show workflow --category work

# Rename the display label
rei custom-property rename priority --label "Task Priority"

# Archive a property
rei custom-property archive priority
```

## Assigning Values

```bash
# Set property on an intention
rei intention set-property <id> priority high

# Set a label-set property (comma-separated labels)
rei intention set-property <id> areas backend,security

# Set property on a habit
rei habit set-property <id> effort 5

# Clear a property
rei intention clear-property <id> priority
```

## Filtering by Properties

```bash
# Filter by exact value
rei intention list --where priority=high

# Numeric comparisons
rei intention list --where "effort>=5"
rei habit list --where "effort<3"

# LabelSet filtering (any = has any of, all = has all of)
rei intention list --where "areas any backend,frontend"
rei intention list --where "areas all backend,security"
```

For comprehensive filtering options, see [Intention Filtering](/docs/guides/intention-filtering).

## Evolving Enum Properties

```bash
# Add a new enum value
rei custom-property add-enum-value priority critical

# Remove an unused value
rei custom-property remove-enum-value priority low
```

**Note:** Values currently in use cannot be removed.

## Evolving Label-Set Properties

```bash
# Add a new label
rei custom-property add-label areas infrastructure

# Remove a label
rei custom-property remove-label areas legacy
```

**Note:** Cannot remove the last label. Must have at least one label.

## State Machine Properties

State machines define workflow states and allowed transitions.

### Example Configuration

Create a YAML file (e.g., `kanban.yaml`):

```yaml
initialState: backlog
states:
  - stateId: backlog
    stateLabel: "Backlog"
    stateOrder: 1
    stateTags:
      - systemTag: TagQueue
  - stateId: in-progress
    stateLabel: "In Progress"
    stateOrder: 2
    stateTags:
      - systemTag: TagActive
  - stateId: done
    stateLabel: "Done"
    stateOrder: 3
    stateTags:
      - systemTag: TagDone
      - systemTag: TagTerminal
transitions:
  - transitionFrom: backlog
    transitionTo: in-progress
    transitionLabel: "Start"
  - transitionFrom: in-progress
    transitionTo: done
    transitionLabel: "Complete"
```

### State Options

| Option | Required | Description |
|--------|----------|-------------|
| `stateId` | Yes | Unique identifier (lowercase, hyphens allowed) |
| `stateLabel` | Yes | Human-readable display name |
| `stateOrder` | No | Display order (lower numbers first) |
| `stateDescription` | No | Description of the state |
| `stateColor` | No | Hex color code (e.g., `#FF5733`) |
| `stateTags` | No | System or user tags for filtering |
| `stateLimit` | No | WIP limit (set via CLI after creation) |

### Display Order (stateOrder)

When using `--group-by` with a state machine property, groups are sorted by `stateOrder` (ascending). States without an order come after those with order, then alphabetically.

```bash
rei intention list --group-by workflow
# Groups appear as: Backlog (1), In Progress (2), Done (3)
```

### Modifying State Machines

```bash
# Add a state
rei custom-property add-state workflow blocked --label "Blocked"

# Add a transition
rei custom-property add-transition workflow backlog blocked
```

Transitions are enforced — you cannot skip directly to a state without a valid transition path.

## State Limits (WIP Limits)

State machines support optional WIP (Work In Progress) limits per state. Limits are advisory — they show warnings but don't block transitions.

### Setting Limits

```bash
# Set a limit on a state
rei custom-property set-state-limit workflow --state in-progress --limit 3

# Clear a limit (make unlimited)
rei custom-property clear-state-limit workflow --state in-progress
```

### Viewing Counts

```bash
rei custom-property show workflow --with-counts
```

Example output:

```
States:
  STATE        TAGS             LIMIT   COUNT   STATUS
  backlog      queue            -       5
  in-progress  active           3       4       OVER LIMIT
  done         done, terminal   -       12
```

The STATUS column shows:
- **OVER LIMIT** — count exceeds limit
- **At limit** — count equals limit
- Empty — under limit or no limit set

## System Tags

State machine states can have system tags for cross-property filtering:

| Tag | Meaning |
|-----|---------|
| `TagQueue` | Items waiting to be worked on |
| `TagActive` | Items currently in progress |
| `TagDone` | Completed items |
| `TagTerminal` | Items in final states (no further transitions) |

Use these with `--state-tag` to filter across all state machine properties:

```bash
rei intention list --state-tag queue
rei intention list --state-tag active
```

## Important Limitations

**Property keys are immutable:**
Once created, keys cannot be changed. Plan naming carefully.

**Value type cannot change:**
You cannot convert an enum to a state machine after creation.

**Scope validation:**
Properties can only be assigned to entities matching their scope.

**State machine transitions are enforced:**
```bash
rei intention set-property <id> status backlog     # OK
rei intention set-property <id> status done        # ERROR if no direct transition
```

**Category-scoped key uniqueness:**
Property keys must be unique within their scope:
- Global properties: key must be unique among all global properties
- Category-scoped: key + category combination must be unique

The same key CAN exist in different categories.

## Command Summary

### Property Definition

| Command | Description |
|---------|-------------|
| `custom-property create` | Create a new property definition |
| `custom-property list` | List all properties |
| `custom-property show` | Show property details (use `--with-counts` for states) |
| `custom-property rename` | Update display label |
| `custom-property archive` | Archive a property |

### Enum Evolution

| Command | Description |
|---------|-------------|
| `custom-property add-enum-value` | Add an enum value |
| `custom-property remove-enum-value` | Remove an unused enum value |

### Label-Set Evolution

| Command | Description |
|---------|-------------|
| `custom-property add-label` | Add a label |
| `custom-property remove-label` | Remove an unused label |

### State Machine Evolution

| Command | Description |
|---------|-------------|
| `custom-property add-state` | Add a state |
| `custom-property remove-state` | Remove an unused state |
| `custom-property add-transition` | Add a transition |
| `custom-property remove-transition` | Remove a transition |
| `custom-property set-state-limit` | Set WIP limit on a state |
| `custom-property clear-state-limit` | Clear WIP limit from a state |

## Supported Entity Types

| Entity | Set Command | Clear Command |
|--------|-------------|---------------|
| Intention | `intention set-property` | `intention clear-property` |
| Habit | `habit set-property` | `habit clear-property` |
| Disruption | `disruption set-property` | `disruption clear-property` |
| Note | `note set-property` | `note clear-property` |

## Related

- [State Machine Properties](/docs/guides/state-machines) — Detailed guide for state machines
- [`rei custom-property`](/docs/commands/custom-property) — Full command reference
- [Intention Filtering](/docs/guides/intention-filtering) — Filtering by property values
- [Custom Properties Concept](/docs/concepts/custom-properties) — Conceptual overview
